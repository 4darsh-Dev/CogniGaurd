{% extends "base.html" %}

{% load static %}
{% block head %}
<style>
    html {
        scroll-behavior: smooth;
    }

    body {
        margin: 0;
        padding: 0;
    }

    .scrollToTop {
        height: 50px;
        width: 50px;
        background: deepskyblue;
        display: none;
        justify-content: center;
        align-items: center;
        border-radius: 50%;
        color: white;
        cursor: pointer;
        position: fixed;
        bottom: 10px;
        right: 50px;
    }

    .scrollToTop .inner {
        height: 85%;
        width: 85%;
        background: black;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 50%;
    }
</style>
{% endblock head %}

{% block title %}Home{% endblock title %}

{% block content %}

{% include 'messages.html' %}

<section class="content-section">
    <header class="welcome flex-cont">
        <div class="welcome_image">
            <img src="{% static 'img/home-img.png' %}" class="welcome-img" alt="shield-and-security">
        </div>
        <div class="welcome-text">
            <div>
                <h1 class="font-mid-large font-primary">Welcome to <span class="blue-text">Cogniguard</span> Customer Service</h1>
                <p class="font-primary font-light">Turning the Lights on Dark Patterns</p>
            </div>
            <div class="welcome-btns">
                <a href="{% url 'home:loginUser' %}" class="btn-primary">Get Started</a>
                <a href="#" class="btn-secondary">Give Feedback</a>
            </div>
        </div>
    </header>

    <section class="cogni-about flex-cont">
        <div class="cogni-about-img">
            <img class="slide-left animate-img" src="{% static 'img/cogni-about.jpg' %}" alt="shield-and-security">
        </div>
        <div class="cogni-about-text slide-right animate-p">
            <h1 class="font-mid-large font-primary">Why <span class="blue-text">CogniGuard</span> Exists...</h1>
            <div class="list">
                <p>Provides on time Dark Pattern detection</p>
                <p>Transparency Score, shows the reality of the website</p>
                <p>Alerts you for Red Flag websites</p>
                <p>Lightweight extension, easy installation and setup</p>
                <p>Helps in eradication of Dark Patterns</p>
                <a href="{% url 'home:about' %}" class="btn-secondary">Know More</a>
            </div>
        </div>
    </section>

    <section class="dp-about flex-cont">
        <h1 class="font-mid-large font-primary">
            <hr style="margin: 10px;">
            What are <span class="blue-text">Dark Patterns</span> and How these affect you?
        </h1>
        <div class="list">
            <p>Designed to mislead users into making unintended choices</p>
            <p>Gathering user data or tracking them without clear consent or making it difficult to opt out.</p>
            <p>Luring users with attractive offers that change or disappear upon closer look.</p>
            <p>Making it hard to cancel subscriptions, often with hidden fees or confusing procedures.</p>
            <p>Creating a sense of false scarcity or pressure to act quickly, like countdown timers or limited-time offers.</p>
            <a href="{% url 'home:know-about-dp' %}" class="btn-secondary">Know More</a>
        </div>
        <hr style="margin: 10px;" class="line-bottom">
    </section>

    <div class="scrollToTop">
        <div class="inner">
            <i class="fa fa-arrow-up icon"></i>
        </div>
    </div>
</section>
{% endblock content %}

{% block script %}
<script src="{% static 'js/messages.js' %}"></script>
<script>
    // Select the scrollToTop element
    var scrollToTop = document.querySelector(".scrollToTop");

    // Function to calculate the scroll value and update the scrollToTop button
    function calcScrollValue() {
        let pos = document.body.scrollTop || document.documentElement.scrollTop;
        let calcHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        let percentval = Math.round((pos * 100) / calcHeight);

        if (pos > 100) {
            scrollToTop.style.display = "flex";
            scrollToTop.style.opacity = "1";
            scrollToTop.style.visibility = "visible";
        } else {
            scrollToTop.style.opacity = "0";
            scrollToTop.style.visibility = "hidden";
        }

        scrollToTop.style.background = `conic-gradient(deepskyblue ${percentval}%, white ${percentval}%)`;
    }

    // Add click event listener to scrollToTop button
    scrollToTop.addEventListener("click", function() {
        document.body.scrollTop = 0; // For Safari
        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE, and Opera
    });

    // Call calcScrollValue on scroll and on load
    window.onscroll = calcScrollValue;
    window.onload = calcScrollValue;
</script>
{% endblock script %}
